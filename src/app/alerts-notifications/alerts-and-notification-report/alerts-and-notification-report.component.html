<div class="content-wrapper">
  <div class="header-and-filters">
    <h1 class="main-heading">Alerts & Notification Report</h1>
  <div class="export-section">
    <label for="export-type">Export</label>
    <select id="export-type" (change)="onExport($event)">
      <option value="" disabled selected>Select Type</option>
      <option value="excel">Excel file</option>
      <option value="pdf">PDF file</option>
      <option value="print">Print</option>
    </select>
  </div>
    
  </div>
    <!-- < class="filter-group">
      <button class="add-alert-btn">ADD ALERT</button>

       <div class="filter-item">
        
        <label for="start-date">Date Range</label>
        <div class="date-range">
        <input type="text" id="start-date" placeholder="Start Date"
        [(ngModel)]="startDate" ngbDatepicker #startDatePicker="ngbDatepicker"
        (click)="startDatePicker.toggle()" readonly />
        <input type="text" id="end-date" placeholder="End Date"
        [(ngModel)]="endDate" ngbDatepicker #endDatePicker="ngbDatepicker"
        (click)="endDatePicker.toggle()" readonly/>
        </div>
        
      </div> 
    
        <div class="filter-item">
        <label for="alert-type">Alert Type</label>
        <select id="alert-type" [(ngModel)]="selectedAlertType">
        <option *ngFor="let type of alertTypes" [value]="type">{{ type }}</option>
        </select>
      </div> -->
         
       
  <div id="table-container" class="table-container">
    <table id="alertTable">
        <thead>
          <tr>
            <th>S.No</th>
            <th>Alert Type</th>
            <th>Alert Message</th>
            <th>Employee Name</th>
            <th>Is Read</th>
            <th>Priority Level</th>
            <th>Expires At</th>
            <th class="no-print">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let alert of alerts; index as i">
            <td>{{ i + 1 }}</td>
            <td>{{ alert.alertType }}</td>
            <td>{{ alert.alertMessage }}</td>
            <td>{{ alert.employeeName }}</td>
            <td>{{ alert.isRead}}</td>
            <td>{{ alert.priorityLevel }}</td>
            <td>{{ alert.expireAt }}</td>
            <td class="no-print">
              <div class="button-wrapper">
                <button (click)="openCreateFormModal(addAlertFormModal, 'view', alert)" mat-icon-button color="primary" class="btn-view">
                  <mat-icon>visibility</mat-icon>
                </button>
                <span class="button-text-view">View</span>
              </div>
  
              <div class="button-wrapper">
                <button (click)="openCreateFormModal(addAlertFormModal, 'edit', alert)"mat-icon-button color="accent" class="btn-edit">
                  <mat-icon>edit</mat-icon>
                </button>
                <span class="button-text-edit">Edit</span>
              </div>
  
              <div class="button-wrapper">
                <button (click)="onDelete(alert)" mat-icon-button color="warn" class="btn-delete">
                  <mat-icon>delete</mat-icon>
                </button>
                <span class="button-text-delete">Delete</span>
              </div>
            </td> 
          </tr>
        </tbody>
      </table>
  </div>
</div>
  
<div *ngIf="isModalOpen" class="overlay"></div>
<ng-template #addAlertFormModal>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <form
        [formGroup]="addAlertForm"
        novalidate
        autocomplete="off"
        (ngSubmit)="isEditMode ? updateAlert() : addAlert()"
      >
        <div class="modal-header">
          <h4 class="modal-title">
            {{ isViewMode ? 'View Alert' : isEditMode ? 'Edit Alert' : 'Add Alert' }}
          </h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="closeCreateFormModal()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Row 1 (Alert Type, Alert Messsge) -->
          <div class="row">
            <div class="col-md-6">
              <label for="alertType">Alert Type</label>
              <select formControlName="alertType" id="alertType" class="form-control"
              [disabled]="isViewMode"
              name="alertType"  required>
                <option value="" disabled selected>Select Type</option>
                <option *ngFor="let type of alertTypes" [value]="type">{{ type }}</option>
              </select>
              
            </div>
            <div class="col-md-6">
              <label for="alertMessage">Alert Message</label>
              <select formControlName="alertMessage" id="alertMessage" class="form-control"
              [disabled]="isViewMode"
              name="alertMessage"  required>
                <option value="" disabled selected>Select Type</option>
                <option *ngFor="let message of alertMessages" [value]="message">{{ message }}</option>
              </select>
            </div>
          </div>

          <!-- Row 2 (Employee Name, End Date) -->
          <div class="row">
            <div class="col-md-6">
              <label for="employeeName">Employee Name</label>
              <input
              type="text"
              formControlName="employeeName"
              id="employeeName"
              class="form-control"
              placeholder="Enter Employee Name"
              [readonly]="isViewMode"
            />
            </div>
            <div class="col-md-6">
              <label for="isRead">Is Read?</label>
              <select
              formControlName="isRead"  id="isRead" 
              class="form-control"
              name="isRead"  required>
                <option value="" disabled selected>Select</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
              </select>
            </div>
          </div>
       

         <!-- Row  (Priority Level, Expires At) -->
         <div class="row">
          <div class="col-md-4">
            <label for="priorityLevel">Priority Level</label>
            <select formControlName="priorityLevel" id="priorityLevel" class="form-control"
            [disabled]="isViewMode"
            name="priorityLevel"  required>
              <option value="" disabled selected>Select Type</option>
              <option *ngFor="let priority of priorityLevels" [value]="priority">{{ priority }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="expiresAt">Expires At</label>
            <input
              type="datetime-local"
              formControlName="expiresAt"
              id="expiresAt"
              name="expiresAt"
              class="form-control"
              [readonly]="isViewMode"
              
              required
            />
          </div>
        </div>
      </div>


        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-danger"
            (click)="closeCreateFormModal()"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="btn btn-success"
            *ngIf="!isViewMode"
          >
            {{ isEditMode ? 'Save Changes' : 'Add Alert' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</ng-template>


